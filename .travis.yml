language: ruby
sudo: true
dist: trusty
rvm:
  - 2.3
python:
  - "3.1"
install:
  - rm -rf ~/.nvm && git clone https://github.com/creationix/nvm.git ~/.nvm && (cd ~/.nvm && git checkout `git describe --abbrev=0 --tags`) && source ~/.nvm/nvm.sh && nvm install 6.10.0

env:
  - TRAVIS_NODE_VERSION="0.12"
before_script:
  - chmod 0755 ci/travis.rb
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start -screen 0 1280x1024x16
script:
  - ci/travis.rb
addons:
  apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable
services:
  - mysql
after_failure:
  - cat target/surefire-reports/*.txt
  - cat install/glassfish4/glassfish/domains/domain1/logs/*.log
  - cat yo/npm-debug.log
cache:
  directories:
    - $HOME/.m2/repository